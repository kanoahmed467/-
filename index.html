<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Manga Reader</title>
    <style>
        body { margin: 0; background: #000; display: flex; flex-direction: column; align-items: center; }
        /* Ø¶ÙØª min-height Ø¹Ø´Ø§Ù† Ø§Ù„ØµÙˆØ± ÙˆÙ‡ÙŠ Ø¨ØªØ­Ù…Ù„ ÙŠÙƒÙˆÙ† Ù„ÙŠÙ‡Ø§ Ù…Ø³Ø§Ø­Ø© ÙˆØ§Ù„Ø³ÙƒØ±ÙˆÙ„ Ù…ÙŠØ¶Ø±Ø¨Ø´ */
        img { width: 100%; max-width: 800px; display: block; margin: 0; padding: 0; border: none; min-height: 500px; background: #111;}
        .loading { color: #fff; padding: 20px; font-family: sans-serif; }
    </style>
</head>
<body>
    <div id="pages"></div>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const imgsParam = urlParams.get('imgs') || "";
        const mangaId = urlParams.get('mid') || "temp"; // Ø³Ø­Ø¨ Ø§Ù„Ù€ mid Ø§Ù„Ù„ÙŠ Ø¨Ø¹ØªÙ‡ Ù…Ù† Ø§Ù„Ø¨Ø§ÙŠØ«ÙˆÙ†
        const images = imgsParam.split(',');
        const container = document.getElementById('pages');
        
        // 1. ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±
        images.forEach(src => {
            const img = document.createElement('img');
            img.src = src;
            img.loading = "lazy";
            container.appendChild(img);
        });

        // 2. ğŸ”¥ Ø­ÙØ¸ Ù…ÙƒØ§Ù† Ø§Ù„Ø³ÙƒØ±ÙˆÙ„ (ÙƒÙ„ Ù…Ø§ Ø§Ù„ÙŠÙˆØ²Ø± ÙŠØ­Ø±Ùƒ Ø§Ù„Ø´Ø§Ø´Ø©)
        window.onscroll = () => {
            localStorage.setItem('save_pos_' + mangaId, window.scrollY);
        };

        // 3. ğŸ”¥ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…ÙƒØ§Ù† (Ø£ÙˆÙ„ Ù…Ø§ Ø§Ù„ØµÙØ­Ø© ØªÙØªØ­)
        window.onload = () => {
            const savedScroll = localStorage.getItem('save_pos_' + mangaId);
            if (savedScroll) {
                // Ø¨Ù†Ø¹Ù…Ù„ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· (500ms) Ø¹Ø´Ø§Ù† Ù†ØªØ£ÙƒØ¯ Ø¥Ù† Ø§Ù„Ù…ØªØµÙØ­ Ø±Ø³Ù… Ø§Ù„ØµÙˆØ± ÙˆØ¨Ù‚Ù‰ ÙÙŠÙ‡ Ù…Ø³Ø§Ø­Ø© ÙŠÙ†Ø· ÙÙŠÙ‡Ø§
                setTimeout(() => {
                    window.scrollTo({
                        top: parseInt(savedScroll),
                        behavior: 'smooth' 
                    });
                }, 500);
            }
        };
    </script>
</body>
</html>

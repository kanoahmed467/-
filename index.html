<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=10.0, user-scalable=yes">
    <title>Manga Kingdom Reader</title>
    <style>
        body { margin: 0; padding: 0; background-color: #0e0e0e; color: white; display: flex; flex-direction: column; align-items: center; }
        #pages-container { width: 100%; touch-action: pan-x pan-y; } /* ğŸ”¥ Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø²ÙˆÙˆÙ… */
        img { display: block; width: 100%; height: auto; border: none; }
        
        /* Ø³ØªØ§ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ */
        .nav-container { 
            display: flex; justify-content: space-between; width: 90%; 
            padding: 20px 0 50px 0; gap: 10px;
        }
        .nav-btn {
            flex: 1; padding: 15px; text-align: center; background: #2196F3;
            color: white; text-decoration: none; border-radius: 10px;
            font-family: sans-serif; font-weight: bold; font-size: 16px;
        }
        .nav-btn.disabled { background: #333; pointer-events: none; opacity: 0.5; }
        #page-counter {
            position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.7);
            padding: 5px 12px; border-radius: 20px; font-size: 12px; z-index: 100;
        }
    </style>
</head>
<body>

    <div id="page-counter">1 / 1</div>
    <div id="pages-container"></div>

    <div class="nav-container" id="nav-ui" style="display: none;">
        <a id="prev-btn" class="nav-btn">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚</a>
        <a id="next-btn" class="nav-btn">Ø§Ù„ØªØ§Ù„ÙŠ â¡ï¸</a>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const imgsData = urlParams.get('imgs');
        const nextLink = urlParams.get('next');
        const prevLink = urlParams.get('prev');

        const container = document.getElementById('pages-container');
        const counter = document.getElementById('page-counter');

        if (imgsData) {
            const ids = imgsData.split(',');
            ids.forEach((id) => {
                const img = document.createElement('img');
                img.src = `https://files.catbox.moe/${id}.jpg`;
                container.appendChild(img);
            });

            // Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ¨Ø±Ù…Ø¬Ø© Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
            document.getElementById('nav-ui').style.display = 'flex';
            
            const nextBtn = document.getElementById('next-btn');
            if (nextLink && nextLink !== "") {
                nextBtn.href = nextLink;
            } else {
                nextBtn.classList.add('disabled');
                nextBtn.innerText = "Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø§Ù†Ø¬Ø§";
            }

            const prevBtn = document.getElementById('prev-btn');
            if (prevLink && prevLink !== "") {
                prevBtn.href = prevLink;
            } else {
                prevBtn.classList.add('disabled');
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯
            window.addEventListener('scroll', () => {
                const images = document.querySelectorAll('img');
                images.forEach((img, index) => {
                    const rect = img.getBoundingClientRect();
                    if (rect.top <= window.innerHeight/2 && rect.bottom >= window.innerHeight/2) {
                        counter.innerText = `${index + 1} / ${images.length}`;
                    }
                });
            });
        }
    </script>
</body>
</html>
